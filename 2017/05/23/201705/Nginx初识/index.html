<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <link rel="dns-prefetch" href="http://example.com">
  
  <title>Nginx 初识 | Hexo</title>
  <meta name="author" content="Gavin">
  
  <meta name="description" content="nginx下载在http://nginx.org/ 网站，直接选择nginx-1.12.0稳定版本
1wget http:&amp;#x2F;&amp;#x2F;nginx.org&amp;#x2F;download&amp;#x2F;nginx-1.12.0.tar.gz   &amp;#x2F;&amp;#x2F;下载nginx

nginx">
  
  
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

  <meta property="og:title" content="Nginx 初识"/>
  <meta property="og:site_name" content="Hexo"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">

  <link rel="preload" as="style" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">
  <link href="https://unpkg.com" rel="dns-prefetch" />
  <link href="https://busuanzi.ibruce.info" rel="dns-prefetch" />
  <link href="https://cdn1.lncld.net" rel="dns-prefetch" />
  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div class="container">
    <div class="left-col" style="background-image:url('https://www.gwt.fun/img/sider.jpg')">
      <div class="intrude-less">
        <header id="header" class="inner">
          <a href="/">
            <div class="profilepic"><img src='https://www.gwt.fun/img/user.png'></div>
          </a>
          <div class="author-name"><a href="/">Gavin</a></div>
          
          <nav id="main-nav">
            <ul class="main">
              
              <li>
                
                  <a href="/archives">归档</a>
                
              </li>
              
              <li>
                
                  <a href="/tags">专题</a>
                
              </li>
              
              <li>
                
                  <a href="/friendlinks">友链</a>
                
              </li>
              
              <li>
                
                  <a href="/life">关于</a>
                
              </li>
              
              <li>
                
                  <a href="/search">搜索</a>
                
              </li>
              
            </ul>
          </nav>
          <nav id="sub-nav">
            <div class="social">
              
              
              
              <a class="github" target="_blank" rel="noopener" href="https://github.com/" title="Github">Github</a>
              
              

              
              <a class="rss" href="/atom.xml" title="RSS">RSS</a>
              
            </div>
          </nav>
        </header>
      </div>
    </div>
    <div class="mid-col">
      <div class="mid-col-container">
        <div id="content" class="inner">
          <article class="post">

  
    <div class="meta">
      
<div class="date">

<time datetime="2017-05-22T22:14:03.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  2017-05-23
</time>





</div>

    </div>
  
  <h1 class="title" itemprop="name">Nginx 初识</h1>
  <div class="entry-content" itemprop="articleBody">
    
    <div class="post-toc">
      <div class="toc-title">TOC</div>
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.</span> <span class="toc-text">nginx下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">nginx安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx%E5%90%AF%E5%8A%A8"><span class="toc-number">3.</span> <span class="toc-text">nginx启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6nginx%EF%BC%88%E4%BF%A1%E5%8F%B7%E9%87%8F%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">控制nginx（信号量）</span></a></li></ol>
    </div>
    
    <h3 id="nginx下载"><a href="#nginx下载" class="headerlink" title="nginx下载"></a>nginx下载</h3><p>在<a target="_blank" rel="noopener" href="http://nginx.org/">http://nginx.org/</a> 网站，直接选择nginx-1.12.0稳定版本<br><img src="/img/blog/2350612-5722b0b3c8c7fd4f.png" alt="Alt text"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.12.0.tar.gz   &#x2F;&#x2F;下载nginx</span><br></pre></td></tr></table></figure>
<p><img src="/img/blog/2350612-3794edcc9febaf6e.png" alt="Alt text"></p>
<h3 id="nginx安装"><a href="#nginx安装" class="headerlink" title="nginx安装"></a>nginx安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf nginx-1.12.0.tar.gz   &#x2F;&#x2F;直接解压</span><br><span class="line">cd nginx-1.12.0  &#x2F;&#x2F;进入解压后的文件夹</span><br><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;webServer   &#x2F;&#x2F;后面的&#x2F;usr&#x2F;webServer 表示你将服务器安装在这个路径里面</span><br></pre></td></tr></table></figure>
<p>使用./configure命令，遇到报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure: error: the HTTP rewrite module requires the PCRE library.</span><br><span class="line">You can either disable the module by using --without-http_rewrite_module</span><br><span class="line">option, or install the PCRE library into the system, or build the PCRE library</span><br><span class="line">statically from the source with nginx by using --with-pcre&#x3D;&lt;path&gt; option.</span><br></pre></td></tr></table></figure>
<p>查询资料说是没有安装PCRE，缺少依赖，在网上搜到nginx安装的需要的依赖，都安装上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openssl libssl-dev    &#x2F;&#x2F;openssl安装</span><br><span class="line">sudo apt-get install libpcre3 libpcre3-dev   &#x2F;&#x2F;依赖包pcre安装</span><br><span class="line">sudo apt-get install zlib1g-dev   &#x2F;&#x2F;依赖包zlib安装</span><br></pre></td></tr></table></figure>
<p>继续使用./configure –prefix=/usr/webServer 命令，没有再报错，成功。<br><img src="/img/blog/2350612-dd8f20884875cb68.png" alt="Alt text"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install   &#x2F;&#x2F;安装，注意安装需要权限</span><br></pre></td></tr></table></figure>
<h3 id="nginx启动"><a href="#nginx启动" class="headerlink" title="nginx启动"></a>nginx启动</h3><p>在安装完成的webServer文件夹中，有四个文件夹<br><img src="/img/blog/2350612-b8421939fa698cde.png" alt="Alt text"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conf   --配置文件</span><br><span class="line">html   --网页文件，也就是网站代码放里面</span><br><span class="line">logs   --日志文件</span><br><span class="line">sbin   --二进制文件</span><br></pre></td></tr></table></figure>
<p>直接启动，监听80端口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;sbin&#x2F;nginx</span><br></pre></td></tr></table></figure>
<h3 id="控制nginx（信号量）"><a href="#控制nginx（信号量）" class="headerlink" title="控制nginx（信号量）"></a>控制nginx（信号量）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TERM, INT	fast shutdown   &#x2F;&#x2F;立即停止nginx</span><br><span class="line">QUIT	graceful shutdown   &#x2F;&#x2F;等待请求结束后再关闭nginx</span><br><span class="line">HUP	changing configuration, keeping up with a changed time zone (only for FreeBSD and Linux),starting new worker processes with a new configuration, graceful shutdown of old worker processes &#x2F;&#x2F;不关闭nginx，但是可以使配置文件马上生效</span><br><span class="line">USR1	re-opening log files   &#x2F;&#x2F;重读日志文件。因为nginx进程一直打开日志文件，当移动或者备份日志文件时，需要使用这个命令，让nginx重新打开日志文件。</span><br><span class="line">USR2	upgrading an executable file   &#x2F;&#x2F;nginx系统升级，直接替换掉二进制文件sbin&#x2F;nginx，然后使用这个命令平滑的升级。</span><br><span class="line">WINCH	graceful shutdown of worker processes</span><br></pre></td></tr></table></figure>
<p>命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep nginx  &#x2F;&#x2F;查看nginx进程</span><br><span class="line">kill -命令  ngxin的主进程</span><br></pre></td></tr></table></figure>
<p><img src="/img/blog/2350612-7631f59a29d8a7ea.png" alt="Alt text"></p>
<p>每次都需要查询一次nginx的主进程，很麻烦，可以直接使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat logs&#x2F;nginx.pid  &#x2F;&#x2F;查看主进程pid，因为nginx将主进程pid保存在这个文件里</span><br><span class="line">kill -HUP &#96;cat logs&#x2F;nginx.pid&#96;  &#x2F;&#x2F;直接使用nginx.pid代替查询pid。注意：这里不是单引号，单引号报错</span><br></pre></td></tr></table></figure>
<p><img src="/img/blog/2350612-41108dfcab111983.png" alt="Alt text"></p>


    

      
  </div>

</article>


  <nav id="pagenavi">
    
    <a href="/2017/06/17/201706/算法导论学习笔记散列表/" class="prev">上一篇：算法导论学习笔记--散列表</a>
    
    
    <a href="/2017/05/18/201705/算法导论学习笔记基本数据结构/" class="next">下一篇：算法导论学习笔记--基本数据结构</a>
    
  </nav>

        </div>
        
        
      </div>
      <footer id="footer" class="inner">
        © 2021 - Gavin -
        <span id="busuanzi_container_site_pv">PV <span id="busuanzi_value_site_pv"></span></span>
        <p>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/thinkerchan/hexo-theme-greyshade">GreyShade</a></p>
      </footer>
    </div>
  </div>
  
  <script async defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
</body>
</html>